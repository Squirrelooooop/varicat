merge(num_var_per_level, new_colnames, by = "old_name")
new_colnames
colnames(num_var_per_level) <- c("old_names", "num_var")
new_colnames <- read.csv("inflam_subset_new_colnames.csv")
merge(num_var_per_level, new_colnames, by = "old_names")
merge(num_var_per_level, new_colnames, by = "old_names")
merge(num_var_per_level, new_colnames, by = "old_names")
rev_data_frame
ontology
inflam_df[c(2,3)]
inflam_df <- merge(num_var_per_level, new_colnames, by = "old_names")
inflam_df[c(2,3)]
inflam_df[c(3,2)]
rev_data_frame$level1
unique(rev_data_frame$level1)
inflam_df[c(3,2)]
unique(rev_data_frame$level1)
unique(rev_data_frame$level2)
unique(rev_data_frame$level3)
inflam_df[c(3,2)]
inflam_ontology <- ontology
new_colnames <- read.csv("inflam_subset_new_colnames.csv")
inflam_df <- merge(num_var_per_level, new_colnames, by = "old_names")
inflam_df <- inflam_df[c(3,2)]
unique(rev_data_frame$level3)
inflam_df
inflam_df$new_names %in% unique(rev_data_frame$level3)
inflam_df[inflam_df$new_names %in% unique(rev_data_frame$level3)]
inflam_df[inflam_df$new_names %in% unique(rev_data_frame$level3),]
inflam_df[!inflam_df$new_names %in% unique(rev_data_frame$level3),]
inflam_df[inflam_df$new_names %in% unique(rev_data_frame$level3),]
inflam_df[!inflam_df$new_names %in% unique(rev_data_frame$level3),]
inflam_df[inflam_df$new_names %in% unique(rev_data_frame$level3),]
unique(rev_data_frame$level3)
inflam_df[inflam_df$new_names %in% unique(rev_data_frame$level3),]
inflam_df[!inflam_df$new_names %in% unique(rev_data_frame$level3),]
[inflam_df$new_names %in% unique(rev_data_frame$level3),]
inflam_df[inflam_df$new_names %in% unique(rev_data_frame$level3),]
rev_data_frame
inflam_df[inflam_df$new_names %in% unique(rev_data_frame$level3),]
rev_data_frame
rev_data_frame$level3
inflam_df[!inflam_df$new_names %in% unique(rev_data_frame$level2),]
inflam_df[!inflam_df$new_names %in% unique(rev_data_frame$level2),]
inflam_df[!inflam_df$new_names %in% unique(rev_data_frame$level2),]
inflam_df[!inflam_df$new_names %in% unique(rev_data_frame$level2),]
inflam_df[!inflam_df$new_names %in% unique(rev_data_frame$level2),]
inflam_df[!inflam_df$new_names %in% unique(rev_data_frame$level2),]
unique(rev_data_frame$level2)+unique(rev_data_frame$level1)
c(unique(rev_data_frame$level2), unique(rev_data_frame$level1))
inflam_df[!inflam_df$new_names %in% c(unique(rev_data_frame$level2), unique(rev_data_frame$level1)),]
!unique(rev_data_frame$level3) %in% inflam_df$new_names
unique(rev_data_frame$level3) %in% inflam_df$new_names
rev_data_frame[unique(rev_data_frame$level3) %in% inflam_df$new_names]
rev_data_frame[unique(rev_data_frame$level3) %in% inflam_df$new_names,]
inflam_df$new_names
rev_data_frame[unique(rev_data_frame$level3) %in% inflam_df$new_names,]
rev_data_frame[unique(rev_data_frame$level3) %in% inflam_df$new_names,]
rev_data_frame[!unique(rev_data_frame$level3) %in% inflam_df$new_names,]
rev_data_frame[!unique(rev_data_frame$level3) %in% inflam_df$new_names,]
rev_data_frame[unique(rev_data_frame$level3) %in% inflam_df$new_names,]
inflam_df$new_names
inflam_df
rev_data_frame[unique(rev_data_frame$level3) %in% inflam_df$new_names,]
rev_data_frame
inflam_df
rev_data_frame[unique(rev_data_frame$level3) %in% inflam_df$new_names,]
rev_data_frame
inflam_df
merge(rev_data_frame, inflam_df)
inflam_df <- inflam_df[c(3,2)]
new_colnames <- read.csv("inflam_subset_new_colnames.csv")
inflam_df <- merge(num_var_per_level, new_colnames, by = "old_names")
inflam_df <- inflam_df[c(3,2)]
inflam_df
merge(rev_data_frame, inflam_df)
inflam_df[!inflam_df$new_names %in% c(unique(rev_data_frame$level2), unique(rev_data_frame$level1)),]
merge(rev_data_frame, inflam_df)
rev_data_frame
rev_data_frame[unique(rev_data_frame$level3) %in% inflam_df$new_names,]
inflam_df
rev_data_frame
inflam_df
rev_data_frame
rev_data_frame
rev_data_frame
rev_data_frame
rev_data_frame[unique(rev_data_frame$level3) %in% inflam_df$new_names,]
rev_data_frame
inflam_df
inflam_df
inflam_df
rev_data_frame
colnames(inflam_df)[1] <- c("level3")
merge(rev_data_frame, inflam_df)
inflam_ontology <- ontology
new_colnames <- read.csv("inflam_subset_new_colnames.csv")
inflam_df <- merge(num_var_per_level, new_colnames, by = "old_names")
inflam_df <- inflam_df[c(3,2)]
colnames(inflam_df)[1] <- c("level3")
unique(rev_data_frame$level3)
inflam_df[inflam_df$new_names %in% unique(rev_data_frame$level3),]
inflam_df[!inflam_df$new_names %in% unique(rev_data_frame$level3),]
inflam_df[!inflam_df$new_names %in% c(unique(rev_data_frame$level2), unique(rev_data_frame$level1)),]
rev_data_frame[unique(rev_data_frame$level3) %in% inflam_df$new_names,]
merge(rev_data_frame, inflam_df)
rev_data_frame
inflam_ontology <- ontology
new_colnames <- read.csv("inflam_subset_new_colnames.csv")
inflam_df <- merge(num_var_per_level, new_colnames, by = "old_names")
inflam_df <- inflam_df[c(3,2)]
colnames(inflam_df)[1] <- c("level3")
# unique(rev_data_frame$level3)
# inflam_df[inflam_df$new_names %in% unique(rev_data_frame$level3),]
# inflam_df[!inflam_df$new_names %in% unique(rev_data_frame$level3),]
# inflam_df[!inflam_df$new_names %in% c(unique(rev_data_frame$level2), unique(rev_data_frame$level1)),]
# rev_data_frame[unique(rev_data_frame$level3) %in% inflam_df$new_names,]
merge(rev_data_frame, inflam_df)
inflam_df
rev_data_frame
inflam_df
rev_data_frame
merge(rev_data_frame, inflam_df)
rev_data_frame
merge(rev_data_frame, inflam_df)
inflam_df
merge(rev_data_frame, inflam_df)
inflam_df
# unique(rev_data_frame$level3)
# inflam_df[inflam_df$new_names %in% unique(rev_data_frame$level3),]
# inflam_df[!inflam_df$new_names %in% unique(rev_data_frame$level3),]
# inflam_df[!inflam_df$new_names %in% c(unique(rev_data_frame$level2), unique(rev_data_frame$level1)),]
rev_data_frame[unique(rev_data_frame$level3) %in% inflam_df$new_names,]
inflam_ontology <- ontology
new_colnames <- read.csv("inflam_subset_new_colnames.csv")
inflam_df <- merge(num_var_per_level, new_colnames, by = "old_names")
inflam_df <- inflam_df[c(3,2)]
#colnames(inflam_df_merge_level_3)[1] <- c("level3")
# unique(rev_data_frame$level3)
# inflam_df[inflam_df$new_names %in% unique(rev_data_frame$level3),]
# inflam_df[!inflam_df$new_names %in% unique(rev_data_frame$level3),]
# inflam_df[!inflam_df$new_names %in% c(unique(rev_data_frame$level2), unique(rev_data_frame$level1)),]
rev_data_frame[unique(rev_data_frame$level3) %in% inflam_df$new_names,]
inflam_df$new_names
rev_data_frame[unique(rev_data_frame$level3) %in% inflam_df$new_names,]
rev_data_frame[unique(rev_data_frame$level2) %in% inflam_df$new_names,]
inflam_df[!inflam_df$new_names %in% unique(rev_data_frame$level3),]
inflam_df[inflam_df$new_names %in% unique(rev_data_frame$level3),]
inflam_df[inflam_df$new_names %in% unique(rev_data_frame$level3),]
merge(rev_data_frame, inflam_df)
colnames(inflam_df_merge_level_3)[1] <- c("level3")
inflam_df_merge_level_3 <- inflam_df[c(3,2)]
inflam_df <- merge(num_var_per_level, new_colnames, by = "old_names")
inflam_df_merge_level_3 <- inflam_df[c(3,2)]
colnames(inflam_df_merge_level_3)[1] <- c("level3")
inflam_df_merge_level_3
rev_data_frame
merge(rev_data_frame, inflam_df_merge_level_3)
colnames(inflam_df_merge_level_3)[1] <- c("level3")
# unique(rev_data_frame$level3)
# inflam_df[inflam_df$new_names %in% unique(rev_data_frame$level3),]
# inflam_df[!inflam_df$new_names %in% unique(rev_data_frame$level3),]
# inflam_df[!inflam_df$new_names %in% c(unique(rev_data_frame$level2), unique(rev_data_frame$level1)),]
# rev_data_frame[unique(rev_data_frame$level3) %in% inflam_df$new_names,]
merge(rev_data_frame, inflam_df_merge_level_3)
inflam_df_merge_level_3 <- inflam_df[c(3,2)]
inflam_df_merge_level_2 <- inflam_df[c(3,2)]
inflam_df_merge_level_1 <- inflam_df[c(3,2)]
colnames(inflam_df_merge_level_2)[1] <- c("level2")
inflam_df_merge_level_2
inflam_df_merge_level_3
colnames(inflam_df_merge_level_3)[1] <- c("level3")
colnames(inflam_df_merge_level_2)[1] <- c("level2")
colnames(inflam_df_merge_level_1)[1] <- c("level1")
merge(rev_data_frame, inflam_df_merge_level_1)
merge(rev_data_frame, inflam_df_merge_level_2)
merge(rev_data_frame, inflam_df_merge_level_1)
rev_data_frame
merge(rev_data_frame, inflam_df_merge_level_1)
merge(rev_data_frame, inflam_df_merge_level_1 , by = "level`")
merge(rev_data_frame, inflam_df_merge_level_1 , by = "level1")
merge(rev_data_frame, inflam_df_merge_level_2 , by = "level2")
inflam_df_merge_level_3
inflam_df_merge_level_1
inflam_df_merge_level_2
colnames(inflam_df_merge_level_3)  <- c("level3", "num_var_3")
colnames(inflam_df_merge_level_2)  <-   c("level2", "num_var_2")
colnames(inflam_df_merge_level_1)  <-   c("level1", "num_var_1")
merge(rev_data_frame, inflam_df_merge_level_1 , by = "level1")
merge(rev_data_frame, inflam_df_merge_level_1 , by = "level1")
merge(rev_data_frame, inflam_df_merge_level_2 , by = "level2")
merge(rev_data_frame, inflam_df_merge_level_3 , by = "level3")
unique(rev_data_frame$level3)
unique(rev_data_frame$level2)
unique(rev_data_frame$level1)
(rev_data_frame, inflam_df_merge_level_2 , by = "level2")
merge(rev_data_frame, inflam_df_merge_level_2 , by = "level2")
merge(rev_data_frame, inflam_df_merge_level_3 , by = "level3")
merge(rev_data_frame, inflam_df_merge_level_1 , by = "level1")
merge(rev_data_frame, inflam_df_merge_level_1 , by = "level1")
merge(rev_data_frame, inflam_df_merge_level_2 , by = "level2")
merge(rev_data_frame, inflam_df_merge_level_3 , by = "level3")
data.frame(colSums(!is.na(inflam_subSet )))
num_var_per_level <- data.frame(colSums(!is.na(inflam_subSet ))) # how many variables are there in each level? (e.g., in  Physical health -> Physical Measurements ->	Weight)
num_var_per_level<- cbind(rownames(num_var_per_level), data.frame(num_var_per_level, row.names=NULL))
colnames(num_var_per_level) <- c("old_names", "num_var")
um_var_per_level) <- c("old_names", "num_var")
num_var_per_level <- data.frame(colSums(!is.na(inflam_subSet ))) # how many variables are there in each level? (e.g., in  Physical health -> Physical Measurements ->	Weight)
num_var_per_level<- cbind(rownames(num_var_per_level), data.frame(num_var_per_level, row.names=NULL))
colnames(num_var_per_level) <- c("old_names", "num_var")
inflam_subSet %>% group_by(Type.of.Metadata.) #%>% tally()
inflam_subSet %>% group_by(Domain.Main.category.of.the.variable.) #%>% tally()
inflam_subSet
merge(rev_data_frame, inflam_df_merge_level_3 , by = "level3")
num_var_per_level
inflam_df <- merge(num_var_per_level, new_colnames, by = "old_names")
inflam_df
inflam_df
inflam_df_merge_level_3
inflam_df_merge_level_1
inflam_df_merge_level_2
inflam_df_merge_level_3
inflam_df[inflam_df$new_names %in% unique(rev_data_frame$level3),]
inflam_df_merge_level_3 <- inflam_df[c(3,2)]
inflam_df_merge_level_2 <- inflam_df[c(3,2)]
inflam_df_merge_level_1 <- inflam_df[c(3,2)]
colnames(inflam_df_merge_level_3)  <- c("level3", "num_var_3")
colnames(inflam_df_merge_level_2)  <-   c("level2", "num_var_2")
colnames(inflam_df_merge_level_1)  <-   c("level1", "num_var_1")
inflam_df[inflam_df$new_names %in% unique(rev_data_frame$level3),]
new_colnames <- read.csv("inflam_subset_new_colnames.csv")
inflam_df <- merge(num_var_per_level, new_colnames, by = "old_names")
inflam_df_merge_level_3 <- inflam_df[c(3,2)]
inflam_df_merge_level_2 <- inflam_df[c(3,2)]
inflam_df_merge_level_1 <- inflam_df[c(3,2)]
colnames(inflam_df_merge_level_3)  <- c("level3", "num_var_3")
colnames(inflam_df_merge_level_2)  <-   c("level2", "num_var_2")
colnames(inflam_df_merge_level_1)  <-   c("level1", "num_var_1")
inflam_df[inflam_df$new_names %in% unique(rev_data_frame$level3),]
new_colnames <- read.csv("inflam_subset_new_colnames.csv")
inflam_df <- merge(num_var_per_level, new_colnames, by = "old_names")
inflam_df_merge_level_3 <- inflam_df[c(3,2)]
inflam_df_merge_level_2 <- inflam_df[c(3,2)]
inflam_df_merge_level_1 <- inflam_df[c(3,2)]
inflam_df_merge_level_1
colnames(inflam_df_merge_level_3)  <- c("level3", "num_var_3")
colnames(inflam_df_merge_level_2)  <-   c("level2", "num_var_2")
colnames(inflam_df_merge_level_1)  <-   c("level1", "num_var_1")
inflam_df[inflam_df$new_names %in% unique(rev_data_frame$level3),]
rev_data_frame[unique(rev_data_frame$level3) %in% inflam_df$new_names,]
merge(rev_data_frame, inflam_df_merge_level_1 , by = "level1")
merge(rev_data_frame, inflam_df_merge_level_3 , by = "level3")
merge(rev_data_frame, inflam_df_merge_level_2 , by = "level2")
merge(rev_data_frame, inflam_df_merge_level_3 , by = "level3")
merge(rev_data_frame, inflam_df_merge_level_2 , by = "level2")
merge(rev_data_frame, inflam_df_merge_level_2 , by = "level2")
merge(rev_data_frame, inflam_df_merge_level_3 , by = "level3") # Comorbidities Physical health Global physical comorbidity score 120
merge(rev_data_frame, inflam_df_merge_level_1 , by = "level1")
merge(rev_data_frame, inflam_df_merge_level_3 , by = "level3") # Comorbidities Physical health Global physical comorbidity score 120
merge(rev_data_frame, inflam_df_merge_level_2 , by = "level2")
merge(rev_data_frame, inflam_df_merge_level_1 , by = "level1")
merge(rev_data_frame, inflam_df_merge_level_1 , by = "level1")
merge(rev_data_frame, inflam_df_merge_level_2 , by = "level2")
merge(rev_data_frame, inflam_df_merge_level_3 , by = "level3")
merge(rev_data_frame, inflam_df_merge_level_3 , by = "level3")
merge(rev_data_frame, inflam_df_merge_level_1 , by = "level1") # Trauma & stress/Physical abuse/Current & Recent p. abuse 3
merge(rev_data_frame, inflam_df_merge_level_2 , by = "level2")
merge(rev_data_frame, inflam_df_merge_level_3 , by = "level3")
merge(rev_data_frame, inflam_df_merge_level_1 , by = "level1") # Trauma & stress/Physical abuse/Current & Recent p. abuse 3
data.frame(colSums(!is.na(inflam_subSet )))
num_var_per_level<- cbind(rownames(num_var_per_level), data.frame(num_var_per_level, row.names=NULL))
num_var_per_level<- cbind(rownames(num_var_per_level), data.frame(num_var_per_level, row.names=NULL))
colnames(num_var_per_level) <- c("old_names", "num_var")
new_colnames <- read.csv("inflam_subset_new_colnames.csv")
inflam_df <- merge(num_var_per_level, new_colnames, by = "old_names")
merge(rev_data_frame, inflam_df_merge_level_3 , by = "level3")
merge(rev_data_frame, inflam_df_merge_level_1 , by = "level1") # Trauma & stress/Physical abuse/Current & Recent p. abuse 3
num_var_per_level
inflam <- read.csv("inflammaging_varicat.csv", sep=",", header=TRUE)
colnames_inflam <- colnames(inflam)
inflam_subSet_cols <- colnames_inflam[lapply(colnames_infam, function(x) length(grep("Please|Is.this|What" ,x,value=FALSE))) == 0]
inflam_subSet <- inflam %>% dplyr::select(inflam_subSet_cols) %>%  select(-(last_col(offset = 5):last_col()))  %>%
select(-head(names(.), 5))
inflam_subSet <- mutate_all(inflam_subSet, list(~na_if(.,"")))
num_var_per_level <- data.frame(colSums(!is.na(inflam_subSet ))) # how many variables are there in each level? (e.g., in  Physical health -> Physical Measurements ->	Weight)
num_var_per_level<- cbind(rownames(num_var_per_level), data.frame(num_var_per_level, row.names=NULL))
colnames(num_var_per_level) <- c("old_names", "num_var")
inflam_subSet %>% group_by(Type.of.Metadata.) #%>% tally()
inflam_subSet %>% group_by(Domain.Main.category.of.the.variable.) #%>% tally()
write.csv(colnames(inflam_subSet), "inflam_subset_colnames.csv")
num_var_per_level
rev_data_frame
num_var_per_level
inflam_df_merge_level_1
merge(rev_data_frame, inflam_df_merge_level_2 , by = "level2")
merge(rev_data_frame, inflam_df_merge_level_3 , by = "level3")
inflam_df_merge_level_1
inflam_df_merge_level_2
inflam_df_merge_level_3
rev_data_frame
inflam_df_merge_level_1
rev_data_frame
inflam_df_merge_level_1
rev_data_frame
inflam_df_merge_level_1
merge(rev_data_frame, inflam_df_merge_level_3 , by = "level3")
merge(rev_data_frame, inflam_df_merge_level_3 , by = "level3")
merge(rev_data_frame, inflam_df_merge_level_2 , by = "level2")
merge(rev_data_frame, inflam_df_merge_level_1 , by = "level1") # Trauma & stress/Physical abuse/Current & Recent p. abuse 3
inflam_df
inflam_df
num_var_per_level<- cbind(rownames(num_var_per_level), data.frame(num_var_per_level, row.names=NULL))
colnames(num_var_per_level) <- c("old_names", "num_var")
inflam_subSet %>% group_by(Type.of.Metadata.) #%>% tally()
inflam_subSet %>% group_by(Domain.Main.category.of.the.variable.) #%>% tally()
write.csv(colnames(inflam_subSet), "inflam_subset_colnames.csv")
#inflam_ontology <- ontology
new_colnames <- read.csv("inflam_subset_new_colnames.csv")
inflam_df <- merge(num_var_per_level, new_colnames, by = "old_names")
inflam_df
inflam <- read.csv("inflammaging_varicat.csv", sep=",", header=TRUE)
colnames_inflam <- colnames(inflam)
inflam_subSet_cols <- colnames_inflam[lapply(colnames_infam, function(x) length(grep("Please|Is.this|What" ,x,value=FALSE))) == 0]
inflam_subSet <- inflam %>% dplyr::select(inflam_subSet_cols) %>%  select(-(last_col(offset = 5):last_col()))  %>%
select(-head(names(.), 5))
inflam_subSet <- mutate_all(inflam_subSet, list(~na_if(.,"")))
num_var_per_level <- data.frame(colSums(!is.na(inflam_subSet ))) # how many variables are there in each level? (e.g., in  Physical health -> Physical Measurements ->	Weight)
num_var_per_level<- cbind(rownames(num_var_per_level), data.frame(num_var_per_level, row.names=NULL))
colnames(num_var_per_level) <- c("old_names", "num_var")
inflam_subSet %>% group_by(Type.of.Metadata.) #%>% tally()
inflam_subSet %>% group_by(Domain.Main.category.of.the.variable.) #%>% tally()
write.csv(colnames(inflam_subSet), "inflam_subset_colnames.csv")
#inflam_ontology <- ontology
new_colnames <- read.csv("inflam_subset_new_colnames.csv")
inflam_df <- merge(num_var_per_level, new_colnames, by = "old_names")
inflam_df
rev_data_frame
merge(rev_data_frame$level1, inflam_df_merge_level_1 , by = "level1") # Trauma & stress/Physical abuse/Current & Recent p. abuse 3
merge(rev_data_frame, inflam_df_merge_level_1 , by = "level1") # Trauma & stress/Physical abuse/Current & Recent p. abuse 3
merge(rev_data_frame, inflam_df_merge_level_3 , by = "level3")
merge(rev_data_frame, inflam_df_merge_level_2 , by = "level2")
merge(rev_data_frame, inflam_df_merge_level_1 , by = "level1") # Trauma & stress/Physical abuse/Current & Recent p. abuse 3
merge(rev_data_frame, inflam_df_merge_level_1 , by = "level1") # Trauma & stress/Physical abuse/Current & Recent p. abuse 3
inflam_df_merge_level_1
inflam_df_merge_level_1
rev_data_frame
inflam_df_merge_level_1
rev_data_frame
inflam_df
num_var_per_level
num_var_per_level<- cbind(rownames(num_var_per_level), data.frame(num_var_per_level, row.names=NULL))
num_var_per_level
colnames(num_var_per_level) <- c("old_names", "num_var")
num_var_per_level
inflam <- read.csv("inflammaging_varicat.csv", sep=",", header=TRUE)
colnames_inflam <- colnames(inflam)
inflam_subSet_cols <- colnames_inflam[lapply(colnames_infam, function(x) length(grep("Please|Is.this|What" ,x,value=FALSE))) == 0]
inflam_subSet <- inflam %>% dplyr::select(inflam_subSet_cols) %>%  select(-(last_col(offset = 5):last_col()))  %>%
select(-head(names(.), 5))
inflam_subSet <- mutate_all(inflam_subSet, list(~na_if(.,"")))
num_var_per_level <- data.frame(colSums(!is.na(inflam_subSet ))) # how many variables are there in each level? (e.g., in  Physical health -> Physical Measurements ->	Weight)
num_var_per_level<- cbind(rownames(num_var_per_level), data.frame(num_var_per_level, row.names=NULL))
colnames(num_var_per_level) <- c("old_names", "num_var")
num_var_per_level
num_var_per_level
num_var_per_level <- data.frame(colSums(!is.na(inflam_subSet )))
num_var_per_level
inflam_subSet
inflam_subSet %>% group_by(Type.of.Metadata.) %>% tally()
rev_data_frame$level1
unique(rev_data_frame$level1)
vector(unique(rev_data_frame$level1))
vectorize(unique(rev_data_frame$level1))
as.vector(unique(rev_data_frame$level1))
inflam_subSet %>% group_by(as.vector(unique(rev_data_frame$level1))) %>% tally()
inflam_subSet %>% group_by(function(x){as.vector(unique(rev_data_frame$level1))}) %>% tally()
inflam_df
inflam_subSet
inflam_subSet$Domain.Main.category.of.the.variable. %>% tally()
inflam_subSet %>% group_by(Domain.Main.category.of.the.variable.) %>% tally()
inflam_subSet %>% group_by(Domain.Main.category.of.the.variable.)
data.frame(colSums(!is.na(inflam_subSet )))
inflam_df_merge_level_3
rev_data_frame
right_join(rev_data_frame, inflam_df_merge_level_1 , by = "level1") # Trauma & stress/Physical abuse/Current & Recent p. abuse 3
merge(rev_data_frame, inflam_df_merge_level_1 , by = "level1") # Trauma & stress/Physical abuse/Current & Recent p. abuse 3
right_join(rev_data_frame, inflam_df_merge_level_1 , by = "level1") # Trauma & stress/Physical abuse/Current & Recent p. abuse 3
right_join(rev_data_frame, inflam_df_merge_level_2 , by = "level2")
right_join(rev_data_frame, inflam_df_merge_level_3 , by = "level3")
right_join(rev_data_frame, inflam_df_merge_level_3 , by = "level3")
inflam_df_merge_level_1
inflam_df_merge_level_2
inflam_df_merge_level_3
right_join(rev_data_frame, inflam_df_merge_level_3 , by = "level3")
right_join(rev_data_frame, inflam_df_merge_level_1 , by = "level1")
num_var_per_level
num_var_per_level<- cbind(rownames(num_var_per_level), data.frame(num_var_per_level, row.names=NULL))
colnames(num_var_per_level) <- c("old_names", "num_var")
num_var_per_level
left_join(rev_data_frame, inflam_df_merge_level_1 , by = "level1") # Trauma & stress/Physical abuse/Current & Recent p. abuse 3
right_join(rev_data_frame, inflam_df_merge_level_1 , by = "level1") # Trauma & stress/Physical abuse/Current & Recent p. abuse 3
right_join(rev_data_frame, inflam_df_merge_level_1 , by = "level1") # Trauma & stress/Physical abuse/Current & Recent p. abuse 3
colSums(!is.na(inflam_subSet ))
colnames_inflam <- colnames(inflam) # get col names
inflam_subSet_cols <- colnames_inflam[lapply(colnames_infam, function(x) length(grep("Please|Is.this|What" ,x,value=FALSE))) == 0] # remove sublevels that are too low in the tree
inflam_subSet <- inflam %>% dplyr::select(inflam_subSet_cols)
inflam_subSet_cols
inflam <- read.csv("inflammaging_varicat.csv", sep=",", header=TRUE)
colnames_inflam <- colnames(inflam) # get col names
inflam_subSet_cols <- colnames_inflam[lapply(colnames_infam, function(x) length(grep("Please|Is.this|What" ,x,value=FALSE))) == 0] # remove sublevels that are too low in the tree
inflam_subSet <- inflam %>% dplyr::select(inflam_subSet_cols) %>%  select(-(last_col(offset = 5):last_col()))  %>%
select(-head(names(.), 5)) #
inflam_subSet <- mutate_all(inflam_subSet, list(~na_if(.,"")))
num_var_per_level <- data.frame(colSums(!is.na(inflam_subSet ))) # how many variables are there in each level? (e.g., in  Physical health -> Physical Measurements ->	Weight)
num_var_per_level<- cbind(rownames(num_var_per_level), data.frame(num_var_per_level, row.names=NULL))
colnames(num_var_per_level) <- c("old_names", "num_var")
inflam_subSet %>% group_by(Domain.Main.category.of.the.variable.) #%>% tally()
write.csv(colnames(inflam_subSet), "inflam_subset_colnames.csv")
new_colnames <- read.csv("inflam_subset_new_colnames.csv")
inflam_df <- merge(num_var_per_level, new_colnames, by = "old_names")
inflam <- read.csv("inflammaging_varicat.csv", sep=",", header=TRUE)
colnames_inflam <- colnames(inflam) # get col names
inflam_subSet_cols <- colnames_inflam[lapply(colnames_infam, function(x) length(grep("Please|Is.this|What" ,x,value=FALSE))) == 0] # remove sublevels that are too low in the tree
inflam_subSet <- inflam %>% dplyr::select(inflam_subSet_cols) %>%  select(-(last_col(offset = 5):last_col()))  %>%
select(-head(names(.), 5)) # remove first and last five cols
inflam_subSet <- mutate_all(inflam_subSet, list(~na_if(.,""))) # remove "" and replace as NAs
num_var_per_level <- data.frame(colSums(!is.na(inflam_subSet ))) # how many variables are there in each level? (e.g., in  Physical health -> Physical Measurements ->	Weight)
num_var_per_level<- cbind(rownames(num_var_per_level), data.frame(num_var_per_level, row.names=NULL)) # remove row index, create row index as new col
colnames(num_var_per_level) <- c("old_names", "num_var")  # rename cols
inflam_subSet %>% group_by(Domain.Main.category.of.the.variable.) #%>% tally()
new_colnames <- read.csv("inflam_subset_new_colnames.csv") # read csv file containing mapping to new cols
inflam_df <- merge(num_var_per_level, new_colnames, by = "old_names") # merge two dfs using old names
inflam_df
inflam_df[inflam_df$new_names %in% unique(rev_data_frame$level3),]
inflam_df <- inflam_df[c(3,2)]
inflam_df[inflam_df$new_names %in% unique(rev_data_frame$level3),]
inflam_df_merge_level_3 <- inflam_df[inflam_df$new_names %in% unique(rev_data_frame$level3),]
merge(inflam_df_merge_level_3, rev_data_frame)
inflam_df_merge_level_3
rev_data_frame
inflam_df_merge_level_3
merge(inflam_df_merge_level_3, rev_data_frame, by = "level3")
inflam_df_merge_level_3 <- inflam_df[inflam_df$new_names %in% unique(rev_data_frame$level3),]
colnames(inflam_df_merge_level_3)[1] <- "level3"
merge(inflam_df_merge_level_3, rev_data_frame, by = "level3")
```
inflam_df_merge_level_3 <- inflam_df[inflam_df$new_names %in% unique(rev_data_frame$level3),]
colnames(inflam_df_merge_level_3)[1] <- "level3"
merge(inflam_df_merge_level_3, rev_data_frame, by = "level3")
merge( rev_data_frame, inflam_df_merge_level_3  ,by = "level3")
merge( rev_data_frame, inflam_df_merge_level_3  ,by = "level3") %>% arrange(pathString)
merge( rev_data_frame, inflam_df_merge_level_3  ,by = "level3") %>% arrange(pathString)
inflam_df_merge_level_2 <- inflam_df[inflam_df$new_names %in% unique(rev_data_frame$level2),]
colnames(inflam_df_merge_level_2)[1] <- "level2"
merge( rev_data_frame, inflam_df_merge_level_2 ,by = "level3") %>% arrange(pathString)
inflam_df_merge_level_2 <- inflam_df[inflam_df$new_names %in% unique(rev_data_frame$level2),]
colnames(inflam_df_merge_level_2)[1] <- "level2"
merge( rev_data_frame, inflam_df_merge_level_2 ,by = "level2") %>% arrange(pathString)
inflam_df_merge_level_1 <- inflam_df[inflam_df$new_names %in% unique(rev_data_frame$level1),]
colnames(inflam_df_merge_level_1)[1] <- "level1"
merge( rev_data_frame, inflam_df_merge_level_1 ,by = "level1") %>% arrange(pathString)
right_join( rev_data_frame, inflam_df_merge_level_1 ,by = "level1") %>% arrange(pathString)
right_join( rev_data_frame, inflam_df_merge_level_1 ,by = "level1") %>% arrange(pathString)
merge( rev_data_frame, inflam_df_merge_level_3  ,by = "level3") %>% arrange(pathString)
inflam_df_merge_level_2 <- inflam_df[inflam_df$new_names %in% unique(rev_data_frame$level2),]
colnames(inflam_df_merge_level_2)[1] <- "level2"
merge( rev_data_frame, inflam_df_merge_level_2 ,by = "level2") %>% arrange(pathString)
inflam_df_merge_level_1 <- inflam_df[inflam_df$new_names %in% unique(rev_data_frame$level1),]
colnames(inflam_df_merge_level_1)[1] <- "level1"
right_join( rev_data_frame, inflam_df_merge_level_1 ,by = "level1") %>% arrange(pathString)
num_var_per_level
inflam
colnames_inflam <- colnames(inflam) # get col names
inflam$Cognitive.type.
colnames_inflam <- colnames(inflam) # get col names
inflam_subSet_cols <- colnames_inflam[lapply(colnames_infam, function(x) length(grep("Please|Is.this|What" ,x,value=FALSE))) == 0] # remove sublevels that are too low in the tree
inflam_subSet <- inflam %>% dplyr::select(inflam_subSet_cols) %>%  select(-(last_col(offset = 5):last_col()))  %>%
select(-head(names(.), 5))
inflam_subSet
inflam_subSet %>% group_by(Domain.Main.category.of.the.variable.)
inflam_subSet %>% group_by(Domain.Main.category.of.the.variable.) %>% tally()
inflam_subSet %>% group_by(Course of bipolar illness-episodes) %>% tally()
inflam_subSet %>% group_by(Domain.Main.category.of.the.variable.) %>% tally()
inflam <- read.csv("inflammaging_varicat.csv", sep=",", header=TRUE)
inflam$Cognitive.type.
colnames_inflam <- colnames(inflam) # get col names
inflam_subSet_cols <- colnames_inflam[lapply(colnames_infam, function(x) length(grep("Please|Is.this|What" ,x,value=FALSE))) == 0] # remove sublevels that are too low in the tree
inflam_subSet <- inflam %>% dplyr::select(inflam_subSet_cols) %>%  select(-(last_col(offset = 5):last_col()))  %>%
select(-head(names(.), 5)) # remove first and last five cols
inflam_subSet <- mutate_all(inflam_subSet, list(~na_if(.,""))) # remove "" and replace as NAs
num_var_per_level <- data.frame(colSums(!is.na(inflam_subSet ))) # how many variables are there in each level? (e.g., in  Physical health -> Physical Measurements ->	Weight)
num_var_per_level<- cbind(rownames(num_var_per_level), data.frame(num_var_per_level, row.names=NULL)) # remove row index, create row index as new col
colnames(num_var_per_level) <- c("old_names", "num_var")  # rename cols
inflam_subSet %>% group_by(Domain.Main.category.of.the.variable.) %>% tally()
inflam_subSet %>% group_by(Domain.Main.category.of.the.variable.) %>% tally()
inflam_subSet
inflam_subSet
inflam_df
inflam_subSet %>% group_by(Domain.Main.category.of.the.variable.) %>% tally()
inflam_subSet
inflam_subSet %>% group_by(Cognitive.type.) %>% tally()
colnames(inflam_subSet)
inflam$Smoking.type.
right_join(rev_data_frame, inflam_df_merge_level_3 , by = "level3")
right_join(rev_data_frame, inflam_df_merge_level_3 , by = "level3")
right_join(rev_data_frame, inflam_df_merge_level_3 , by = "level3")
right_join(rev_data_frame, inflam_df_merge_level_2 , by = "level2")
inflam_subSet
inflam_subSet %>% group_by(Type.of.Metadata) %>% tally()
inflam_subSet %>% group_by(Type.of.Metadata) %>% tally()
inflam_subSet
inflam_subSet %>% group_by(Type.of.Metadata.) %>% tally()
